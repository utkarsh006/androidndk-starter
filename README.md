### Demo Video

https://github.com/user-attachments/assets/e70b98b6-612d-45d1-bfd7-f8240a107b3f

<br><br>

### High-Level Design (HLD) – Android NDK Image Processing Demo

This project is a minimal Android + C++ (NDK) app that demonstrates how to:
- Pick an image from the device gallery.
- Send the raw ARGB pixel buffer to C++ via JNI.
- Process / annotate the image in native code.
- Return the modified pixels to Kotlin for display.
- Also return a **text description from C++** and show it **above** the image.

The goal is to be a clear, end‑to‑end reference for wiring UI → Kotlin → JNI → C++ → back to UI.

### Architecture Overview

- **Presentation layer (Kotlin / Android)**  
  - `MainActivity` is the single screen:
    - Hosts a **"Pick Image"** button.
    - Shows the processed bitmap in `ImageView` `imageResult`.
    - Shows a native text string from C++ in `TextView` `text_from_cpp` above the image.
  - `activity_main.xml` defines this layout (button → text → image).

- **Native bridge (JNI)**  
  - C++ is compiled as a shared library `libhello.so` via CMake (`app/src/main/cpp/CMakeLists.txt`).
  - `MainActivity` declares two `external` functions:
    - `processImage(pixels: IntArray, width: Int, height: Int): IntArray`
    - `getImageInfoText(width: Int, height: Int): String`
  - Corresponding JNI functions are implemented in `native-lib.cpp`:
    - `Java_com_example_hello_MainActivity_processImage`
    - `Java_com_example_hello_MainActivity_getImageInfoText`
  - The library is loaded in the `companion object` of `MainActivity` via `System.loadLibrary("hello")`.

- **Native logic (C++ / NDK)**  
  - **Image processing path**:
    - Receives an `IntArray` of ARGB pixels (`pixels`), plus `width` and `height`.
    - Allocates a new `jintArray`, copies the input pixels into it.
    - (Project can be extended here with real image processing, filters, etc.)
    - Returns the new pixel buffer to Kotlin.
  - **Text generation path**:
    - `getImageInfoText` receives `width` and `height`.
    - C++ computes the size string (e.g. `"Image size from C++: 1080 x 1920"`).
    - Returns a `jstring` to Kotlin, which is displayed in the TextView above the image.

### End-to-End Flow (User Journey)

1. **User action – pick image**
   - User taps **"Pick Image"** button.
   - `ActivityResultContracts.GetContent` launches the system picker with MIME type `image/*`.

2. **Load image into a `Bitmap` (Kotlin)**
   - `showImageViaCpp(uri)` is called with the chosen `Uri`.
   - `loadBitmap(uri)` decodes it to a `Bitmap` (using `ImageDecoder` on modern Android, `MediaStore` on older).
   - The bitmap is copied to `Bitmap.Config.ARGB_8888` for predictable pixel format.

3. **Prepare pixel buffer**
   - From the `Bitmap`, Kotlin extracts:
     - `width`, `height`
     - a flat `IntArray` of size `width * height` using `bitmap.getPixels(...)`.

4. **Call into C++ for image processing**
   - Kotlin calls:
     - `val processedPixels = processImage(pixels, width, height)`
   - JNI bridges to `Java_com_example_hello_MainActivity_processImage`:
     - Acquires the raw `jint*` pointer for the input array.
     - Allocates a new `jintArray` for output.
     - Copies the input pixels into the output array.
     - (Extension point: apply filters, overlays, etc. here.)
     - Releases input and returns the output pixel array.

5. **Reconstruct and display processed image**
   - Kotlin creates a new `Bitmap` from `processedPixels`:
     - `Bitmap.createBitmap(processedPixels, width, height, Bitmap.Config.ARGB_8888)`
   - Sets it on `binding.imageResult` to show it in the UI.

6. **Call into C++ for descriptive text**
   - Using the same `width` and `height`, Kotlin calls:
     - `val infoText = getImageInfoText(width, height)`
   - JNI bridges to `Java_com_example_hello_MainActivity_getImageInfoText`:
     - C++ formats a string like `"Image size from C++: 1080 x 1920"`.
     - Returns it as `jstring`.
   - Kotlin sets this text to `binding.textFromCpp`, which is positioned above the image.

### Key Components & Responsibilities

- **`MainActivity.kt`**
  - Owns lifecycle and user interactions.
  - Manages gallery picking via `ActivityResultContracts.GetContent`.
  - Bridges between `Bitmap` and primitive arrays for JNI.
  - Updates the UI (`ImageView` and `TextView`) with data from C++.

- **`activity_main.xml`**
  - Declares:
    - `button_pick_image` – launch gallery.
    - `text_from_cpp` – shows text generated by native code.
    - `image_result` – shows processed bitmap returned from native code.

- **`native-lib.cpp`**
  - `processImage`:
    - Proof‑of‑concept for native image processing on ARGB buffers.
    - Safe JNI handling: `GetIntArrayElements`, `NewIntArray`, `SetIntArrayRegion`, `ReleaseIntArrayElements`.
  - `getImageInfoText`:
    - Encapsulates any C++‑side interpretation of image dimensions.
    - Returns descriptive text to be rendered in Kotlin UI.

- **`CMakeLists.txt` (in `app/src/main/cpp`)**
  - Defines the `hello` shared library target.
  - Adds `native-lib.cpp` as a source file.
  - Links standard Android / logging libraries.

